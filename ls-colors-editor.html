<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LS_COLORS Editor</title>
    <style>
        @font-face {
            font-family: 'Keypunch029';
            src: url('https://fontlibrary.org//face/keypunch029') format('opentype');
            font-weight: bold;
        }
        
        @font-face {
            font-family: 'Cyanotype';
            src: url('https://fontlibrary.org//face/cyanotype') format('opentype');
            font-weight: bold;
        }
        
        @font-face {
            font-family: 'Poorfish';
            src: url('https://fontlibrary.org//face/poorfish') format('opentype');
            font-weight: normal;
        }
        
        @font-face {
            font-family: 'CoderNarrow';
            src: url('https://fontlibrary.org//face/coder-narrow') format('opentype');
            font-weight: normal;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'CoderNarrow', 'Courier New', 'Lucida Console', monospace;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            transition: background 0.3s;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
            transition: background 0.3s, color 0.3s;
        }
        
        body.dark-mode .container {
            background: #1e1e1e;
            color: #e0e0e0;
        }
        
        h1 {
            font-family: 'Keypunch029', monospace;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            font-size: 2em;
            transition: color 0.3s;
        }
        
        body.dark-mode h1 {
            color: #e0e0e0;
        }
        
        h3 {
            font-family: 'Keypunch029', monospace;
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        
        body.dark-mode h3 {
            color: #b0b0b0;
        }
        
        .mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .mode-toggle button {
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #667eea;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .mode-toggle button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        body.dark-mode .mode-toggle button {
            background: rgba(30, 30, 30, 0.9);
            border-color: #a78bff;
        }
        
        .input-section {
            margin-bottom: 30px;
        }
        
        textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-family: 'CoderNarrow', 'Courier New', monospace;
            font-size: 13px;
            resize: vertical;
            transition: border-color 0.3s, background 0.3s, color 0.3s;
        }
        
        body.dark-mode textarea {
            background: #2a2a2a;
            color: #e0e0e0;
            border-color: #555;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        body.dark-mode textarea:focus {
            border-color: #a78bff;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'CoderNarrow', 'Courier New', 'Lucida Console', monospace;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        body.dark-mode .btn-secondary {
            background: #3a3a3a;
            color: #e0e0e0;
        }
        
        body.dark-mode .btn-secondary:hover {
            background: #4a4a4a;
        }
        
        .table-container {
            overflow-x: auto;
            margin-top: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            font-family: 'Cyanotype', monospace;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
            font-size: 14px;
        }
        
        td {
            font-family: 'Poorfish', monospace;
            font-weight: normal;
        }
        
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        body.dark-mode tr:nth-child(odd) {
            background: #1e1e1e;
            color: #e0e0e0;
        }
        
        body.dark-mode tr:nth-child(even) {
            background: #2a2a2a;
            color: white;
        }
        
        tr:nth-child(even) select {
            background: #f9f9f9;
        }
        
        body.dark-mode tr:nth-child(even) select {
            background: #3a3a3a;
            color: white;
            border-color: #555;
        }
        
        select {
            width: 100%;
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Poorfish', monospace;
            font-size: 12px;
            cursor: pointer;
            background: white;
            transition: background 0.3s, color 0.3s, border-color 0.3s;
        }
        
        body.dark-mode select {
            background: #2a2a2a;
            color: #e0e0e0;
            border-color: #555;
        }
        
        select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        body.dark-mode select:focus {
            border-color: #a78bff;
        }
        
        .preview-cell {
            font-family: 'CoderNarrow', 'Courier New', monospace;
            font-weight: bold;
            padding: 8px 12px;
            border-radius: 4px;
            display: inline-block;
            min-width: 80px;
        }
        
        .category {
            font-weight: 600;
            color: #555;
        }
        
        tr:nth-child(even) .category {
            color: #555;
        }
        
        body.dark-mode .category {
            color: #b0b0b0;
        }
        
        .extension {
            font-family: 'CoderNarrow', 'Courier New', monospace;
            color: #764ba2;
            font-weight: 600;
        }
        
        tr:nth-child(even) .extension {
            color: #764ba2;
        }
        
        body.dark-mode .extension {
            color: #a78bff;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 8px;
            transition: background 0.3s;
        }
        
        body.dark-mode .stats {
            background: #2a2a2a;
        }
        
        .stat-item {
            flex: 1;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-family: 'CoderNarrow', 'Courier New', 'Lucida Console', monospace;
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-input {
            width: 300px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: 'CoderNarrow', 'Courier New', 'Lucida Console', monospace;
            transition: background 0.3s, color 0.3s, border-color 0.3s;
        }
        
        body.dark-mode .filter-input {
            background: #2a2a2a;
            color: #e0e0e0;
            border-color: #555;
        }
        
        body.dark-mode .filter-input:focus {
            border-color: #a78bff;
        }
        
        .error {
            background: #fee;
            border: 1px solid #fcc;
            padding: 15px;
            border-radius: 6px;
            color: #c33;
            margin-bottom: 20px;
            font-family: 'CoderNarrow', 'Courier New', 'Lucida Console', monospace;
        }
        
        .success {
            background: #efe;
            border: 1px solid #cfc;
            padding: 15px;
            border-radius: 6px;
            color: #3c3;
            margin-bottom: 20px;
            font-family: 'CoderNarrow', 'Courier New', 'Lucida Console', monospace;
        }
    </style>
</head>
<body>
    <div class="mode-toggle">
        <button onclick="toggleDarkMode()" id="modeBtn">üåô</button>
    </div>
    
    <div class="container">
        <h1>üé® LS_COLORS Editor</h1>
        
        <div class="input-section">
            <h3>LS_COLORS Input</h3>
            <textarea id="inputColors" placeholder="Paste LS_COLORS string here (e.g.: di=0;38;2;102;217;239:*.txt=0;38;2;226;209;57:...)"></textarea>
            <div class="button-group">
                <button class="btn-primary" onclick="parseColors()">üîÑ Parse</button>
                <button class="btn-secondary" onclick="exportColors()">üì§ Export</button>
                <button class="btn-secondary" onclick="resetAll()">üîÑ Reset</button>
            </div>
        </div>
        
        <div id="message"></div>
        
        <div class="stats" id="stats" style="display:none;">
            <div class="stat-item">
                <div class="stat-value" id="totalEntries">0</div>
                <div class="stat-label">Entries</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalExtensions">0</div>
                <div class="stat-label">File Extensions</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalSpecial">0</div>
                <div class="stat-label">Special Entries</div>
            </div>
        </div>
        
        <div class="filter-section" id="filterSection" style="display:none;">
            <input type="text" class="filter-input" id="filterInput" placeholder="üîç Filter (Extension or Category)..." onkeyup="filterTable()">
        </div>
        
        <div class="table-container" id="tableContainer" style="display:none;">
            <table id="colorTable">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Extension/Key</th>
                        <th>FG Value</th>
                        <th>BG Value</th>
                        <th>Live Preview</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let colorData = [];
        
        // ANSI color presets for dropdowns
        const colorPresets = [
            { label: 'None', value: '' },
            { label: 'Red', value: '38;2;249;38;114' },
            { label: 'Green', value: '38;2;0;255;135' },
            { label: 'Yellow', value: '38;2;226;209;57' },
            { label: 'Blue', value: '38;2;102;217;239' },
            { label: 'Orange', value: '38;2;253;151;31' },
            { label: 'Pink', value: '38;2;249;38;114' },
            { label: 'Violet', value: '38;2;174;129;255' },
            { label: 'Turquoise', value: '38;2;102;217;239' },
            { label: 'Lime', value: '38;2;166;226;46' },
            { label: 'Beige', value: '38;2;230;219;116' },
            { label: 'Gray', value: '38;2;122;112;112' },
            { label: 'White', value: '38;2;255;255;255' },
            { label: 'Black', value: '38;2;0;0;0' }
        ];
        
        const bgColorPresets = [
            { label: 'None', value: '' },
            { label: 'Black BG', value: '48;2;0;0;0' },
            { label: 'Dark Gray BG', value: '48;2;51;51;51' },
            { label: 'Red BG', value: '48;2;249;38;114' },
            { label: 'Orange BG', value: '48;2;253;151;31' },
            { label: 'Yellow BG', value: '48;2;230;219;116' },
            { label: 'Light Red BG', value: '48;2;255;74;68' },
            { label: 'Blue BG', value: '48;2;102;217;239' }
        ];
        
        // Enhanced category mapping based on analysis of LS_COLORS files
        const categoryMap = {
            // Programming Languages
            'c': 'C Source Code', 'h': 'C Header', 
            'cpp': 'C++ Source Code', 'cc': 'C++ Source Code', 'cxx': 'C++ Source Code',
            'hpp': 'C++ Header', 'hh': 'C++ Header', 'hxx': 'C++ Header',
            'py': 'Python Source Code', 'pyc': 'Python Bytecode', 'pyd': 'Python Extension', 'pyo': 'Python Optimized',
            'js': 'JavaScript Source Code', 'jsx': 'React/JSX Source Code',
            'ts': 'TypeScript Source Code', 'tsx': 'TypeScript/React Source Code',
            'java': 'Java Source Code', 'class': 'Java Bytecode',
            'cs': 'C# Source Code', 'csx': 'C# Script',
            'go': 'Go Source Code', 'mod': 'Go Module',
            'rs': 'Rust Source Code', 'rlib': 'Rust Library',
            'php': 'PHP Source Code', 
            'rb': 'Ruby Source Code', 'gemspec': 'Ruby Gem Specification',
            'pl': 'Perl Source Code', 'pm': 'Perl Module',
            'lua': 'Lua Source Code',
            'swift': 'Swift Source Code',
            'kt': 'Kotlin Source Code', 'kts': 'Kotlin Script',
            'scala': 'Scala Source Code',
            'clj': 'Clojure Source Code',
            'elm': 'Elm Source Code', 'el': 'Emacs Lisp Source Code', 'elc': 'Emacs Lisp Bytecode',
            'hs': 'Haskell Source Code', 'hi': 'Haskell Interface',
            'ml': 'OCaml Source Code', 'mli': 'OCaml Interface',
            'fs': 'F# Source Code', 'fsi': 'F# Interface', 'fsx': 'F# Script',
            'vb': 'Visual Basic Source Code',
            'asm': 'Assembly Source Code',
            's': 'Assembly Source Code',
            'v': 'Verilog Source Code',
            'vhd': 'VHDL Source Code',
            'zig': 'Zig Source Code',
            'nim': 'Nim Source Code', 'nims': 'Nim Script', 'nimble': 'Nim Package',
            'cr': 'Crystal Source Code',
            'd': 'D Source Code',
            'dart': 'Dart Source Code',
            'jl': 'Julia Source Code',
            'r': 'R Source Code',
            'm': 'Objective-C Source Code',
            'mm': 'Objective-C++ Source Code',
            'ada': 'Ada Source Code', 'adb': 'Ada Body', 'ads': 'Ada Specification',
            'pas': 'Pascal Source Code',
            'f': 'Fortran Source Code', 'f90': 'Fortran 90 Source Code',
            'pro': 'Prolog Source Code',
            'erl': 'Erlang Source Code',
            'ex': 'Elixir Source Code', 'exs': 'Elixir Script',
            'mojo': 'Mojo Source Code',
            'prql': 'PRQL Source Code',
            'raku': 'Raku Source Code',
            'purs': 'PureScript Source Code',
            
            // Scripting/Shell
            'sh': 'Shell Script', 'bash': 'Bash Script', 'zsh': 'Zsh Script', 'fish': 'Fish Script',
            'ps1': 'PowerShell Script', 'psd1': 'PowerShell Data', 'psm1': 'PowerShell Module',
            'bat': 'Batch Script', 'cmd': 'Command Script',
            'tcl': 'Tcl Script',
            'awk': 'AWK Script',
            'sed': 'Sed Script',
            'applescript': 'AppleScript',
            
            // Web Technologies
            'html': 'HTML Document', 'htm': 'HTML Document', 'xhtml': 'XHTML Document', 'shtml': 'Server HTML',
            'css': 'CSS Stylesheet', 'scss': 'SCSS Stylesheet', 'sass': 'SASS Stylesheet', 'less': 'LESS Stylesheet',
            'xml': 'XML Document',
            'json': 'JSON Data',
            'yaml': 'YAML Document', 'yml': 'YAML Document',
            'toml': 'TOML Document',
            'svg': 'SVG Image',
            'webmanifest': 'Web App Manifest',
            
            // Documents
            'txt': 'Text Document',
            'md': 'Markdown Document', 'markdown': 'Markdown Document', 'mdown': 'Markdown Document',
            'rst': 'reStructuredText Document',
            'tex': 'LaTeX Document', 'ltx': 'LaTeX Document', 'sty': 'LaTeX Style', 'aux': 'LaTeX Auxiliary', 
            'bbl': 'LaTeX Bibliography', 'bcf': 'LaTeX BCF', 'blg': 'LaTeX Blog', 'fdb_latexmk': 'LaTeX Make',
            'fls': 'LaTeX File List', 'synctex.gz': 'LaTeX SyncTeX',
            'pdf': 'PDF Document',
            'doc': 'Word Document', 'docx': 'Word Document',
            'ppt': 'PowerPoint Presentation', 'pptx': 'PowerPoint Presentation',
            'xls': 'Excel Spreadsheet', 'xlsx': 'Excel Spreadsheet',
            'odt': 'OpenDocument Text', 'ods': 'OpenDocument Spreadsheet', 'odp': 'OpenDocument Presentation',
            'rtf': 'Rich Text Format',
            'epub': 'EPUB Ebook',
            
            // Images
            'jpg': 'JPEG Image', 'jpeg': 'JPEG Image', 'jxl': 'JPEG XL Image',
            'png': 'PNG Image',
            'gif': 'GIF Image',
            'bmp': 'Bitmap Image',
            'tiff': 'TIFF Image', 'tif': 'TIFF Image',
            'webp': 'WebP Image',
            'ico': 'Icon Image',
            'svg': 'SVG Image',
            'psd': 'Photoshop Document',
            'ai': 'Adobe Illustrator',
            'eps': 'Encapsulated PostScript',
            'raw': 'RAW Image', 'cr2': 'Canon RAW', 'cr3': 'Canon RAW', 'arw': 'Sony RAW', 'nef': 'Nikon RAW',
            'dng': 'Digital Negative', 'orf': 'Olympus RAW', 'rw2': 'Panasonic RAW', 'rwl': 'Leica RAW',
            '3fr': 'Hasselblad RAW', 'ari': 'ARRIRAW', 'srf': 'Sony RAW', 'sr2': 'Sony RAW', 'srw': 'Samsung RAW',
            'kdc': 'Kodak RAW', 'dcs': 'Kodak RAW', 'dcr': 'Kodak RAW', 'drf': 'Kodak RAW',
            'mef': 'Mamiya RAW', 'mrw': 'Minolta RAW', 'nrw': 'Nikon RAW', 'pef': 'Pentax RAW',
            'ptx': 'Pentax RAW', 'pxn': 'Logitech RAW', 'r3d': 'Red RAW', 'raf': 'Fuji RAW',
            'cap': 'Phase One RAW', 'iiq': 'Phase One RAW', 'eip': 'Phase One RAW',
            'erf': 'Epson RAW', 'fff': 'Imacon RAW', 'mos': 'Leaf RAW', 'nrw': 'Nikon RAW',
            'avif': 'AVIF Image', 'heif': 'HEIF Image', 'qoi': 'QOI Image',
            'x3f': 'Sigma RAW', 'xmp': 'XMP Metadata',
            
            // 3D & CAD
            'blend': 'Blender File',
            'obj': 'Wavefront OBJ',
            'stl': 'STL 3D Model',
            'fbx': 'FBX 3D Model',
            'dae': 'Collada 3D Model',
            '3ds': '3D Studio Scene',
            '3mf': '3D Manufacturing Format',
            'amf': 'Additive Manufacturing File',
            'step': 'STEP 3D Model', 'stp': 'STEP 3D Model',
            'iges': 'IGES 3D Model', 'igs': 'IGES 3D Model',
            'scad': 'OpenSCAD Script',
            'mtl': 'Wavefront Material',
            'wrl': 'VRML World',
            'x3d': 'X3D File',
            'usd': 'USD Scene', 'usda': 'USD Scene', 'usdc': 'USD Scene', 'usdz': 'USD Scene',
            
            // Audio
            'mp3': 'MP3 Audio',
            'wav': 'WAV Audio',
            'flac': 'FLAC Audio',
            'aif': 'AIFF Audio',
            'ogg': 'Ogg Vorbis Audio',
            'm4a': 'MPEG-4 Audio',
            'wma': 'Windows Media Audio',
            'ape': 'Monkey\'s Audio',
            'mid': 'MIDI Audio',
            'opus': 'Opus Audio',
            
            // Video
            'mp4': 'MPEG-4 Video',
            'avi': 'AVI Video',
            'mkv': 'Matroska Video',
            'mov': 'QuickTime Video',
            'wmv': 'Windows Media Video',
            'flv': 'Flash Video',
            'webm': 'WebM Video',
            'm4v': 'MPEG-4 Video',
            'mpg': 'MPEG Video', 'mpeg': 'MPEG Video',
            'ogv': 'Ogg Video',
            'vob': 'DVD Video',
            'swf': 'Flash Movie',
            'h264': 'H.264 Video',
            
            // Archives
            'zip': 'ZIP Archive',
            'tar': 'TAR Archive',
            'gz': 'GZIP Archive',
            'bz2': 'BZIP2 Archive',
            'xz': 'XZ Archive',
            '7z': '7-Zip Archive',
            'rar': 'RAR Archive',
            'arj': 'ARJ Archive',
            'zst': 'Zstandard Archive',
            'tbz': 'Tar BZIP2 Archive', 'tbz2': 'Tar BZIP2 Archive',
            'tgz': 'Tar GZIP Archive',
            
            // Executables & Libraries
            'exe': 'Windows Executable',
            'com': 'DOS Executable',
            'app': 'macOS Application',
            'deb': 'Debian Package',
            'rpm': 'RPM Package',
            'pkg': 'macOS Package',
            'msi': 'Windows Installer',
            'apk': 'Android Package',
            'dmg': 'macOS Disk Image',
            'iso': 'ISO Disk Image',
            'img': 'Disk Image',
            'toast': 'Toast Disk Image',
            'xbps': 'Void Linux Package',
            'so': 'Shared Library',
            'dll': 'Dynamic Link Library',
            'dylib': 'macOS Dynamic Library',
            'ko': 'Kernel Module',
            'bin': 'Binary File',
            'vcd': 'Virtual CD',
            'bag': 'ROS Bag File',
            
            // Configuration
            'conf': 'Configuration File',
            'config': 'Configuration File',
            'cfg': 'Configuration File',
            'ini': 'INI Configuration',
            'properties': 'Properties File',
            'env': 'Environment File',
            'gitconfig': 'Git Configuration',
            'gitignore': 'Git Ignore',
            'gitattributes': 'Git Attributes',
            'gitmodules': 'Git Submodules',
            'hgrc': 'Mercurial Configuration',
            'dockerfile': 'Dockerfile',
            'makefile': 'Makefile', 'mk': 'Makefile',
            'cmake': 'CMake File', 'cmake.in': 'CMake Input',
            'sconstruct': 'SCons Build', 'sconscript': 'SCons Script',
            'gradle': 'Gradle Build',
            'flake8': 'Flake8 Configuration',
            'editorconfig': 'EditorConfig',
            'clang-format': 'Clang Format',
            'nix': 'Nix Expression',
            'toml': 'TOML Configuration',
            'yaml': 'YAML Configuration', 'yml': 'YAML Configuration',
            'json': 'JSON Configuration',
            'xml': 'XML Configuration',
            'desktop': 'Desktop Entry',
            'plist': 'Property List',
            'reg': 'Windows Registry',
            
            // Development & Build
            'o': 'Object File',
            'a': 'Static Library',
            'lo': 'Libtool Object',
            'la': 'Libtool Archive',
            'bc': 'LLVM Bitcode',
            'll': 'LLVM IR',
            'hi': 'Haskell Interface',
            'pyc': 'Python Bytecode',
            'class': 'Java Bytecode',
            'rlib': 'Rust Library',
            'dyn_o': 'Dynamic Object',
            'dyn_hi': 'Dynamic Interface',
            'rmeta': 'Rust Metadata',
            
            // Data & Databases
            'db': 'Database File',
            'sql': 'SQL Script',
            'csv': 'CSV Data',
            'tsv': 'TSV Data',
            'data': 'Data File',
            
            // Temporary & System
            'tmp': 'Temporary File',
            'temp': 'Temporary File',
            'swp': 'Swap File',
            'swo': 'Swap File',
            'pid': 'Process ID',
            'lock': 'Lock File',
            'cache': 'Cache File',
            'log': 'Log File',
            'out': 'Output File',
            'bak': 'Backup File',
            'orig': 'Original Backup',
            'ds_store': 'DS_Store File',
            'localized': 'Localized Resource',
            'cfsusertextencoding': 'CFUserTextEncoding',
            'scons_opt': 'SCons Options',
            'timestamp': 'Timestamp File',
            'sconsign.dblite': 'SCons Database',
            'fdb_latexmk': 'LaTeX Make Database',
            'ctags': 'Ctags File',
            
            // Documentation
            'readme': 'README', 'readme.md': 'README', 'readme.txt': 'README',
            'changelog': 'Changelog', 'changelog.md': 'Changelog', 'changelog.txt': 'Changelog',
            'license': 'License', 'licence': 'License', 'license-mit': 'MIT License', 'license-apache': 'Apache License',
            'copying': 'Copying',
            'copyright': 'Copyright',
            'authors': 'Authors',
            'contributing': 'Contributing', 'contributing.md': 'Contributing', 'contributing.txt': 'Contributing',
            'contributors': 'Contributors', 'contributors.md': 'Contributors', 'contributors.txt': 'Contributors',
            'code_of_conduct': 'Code of Conduct', 'code_of_conduct.md': 'Code of Conduct', 'code_of_conduct.txt': 'Code of Conduct',
            'codeowners': 'Code Owners',
            'notice': 'Notice',
            'version': 'Version',
            'install': 'Install', 'install.md': 'Install', 'install.txt': 'Install',
            'manifest.in': 'Manifest',
            'doxyfile': 'Doxygen Configuration',
            'todo': 'TODO', 'todo.md': 'TODO', 'todo.txt': 'TODO',
            'faq': 'FAQ',
            'legacy': 'Legacy',
            
            // Other
            'passwd': 'Password File',
            'shadow': 'Shadow File',
            'stdin': 'Standard Input',
            'stdout': 'Standard Output',
            'stderr': 'Standard Error',
            'icon': 'Icon File'
        };
        
        // Special keys
        const specialKeys = {
            'di': 'Directory', 'ln': 'Symlink', 'ex': 'Executable', 'fi': 'File',
            'bd': 'Block Device', 'cd': 'Character Device', 'pi': 'FIFO/Pipe',
            'so': 'Socket', 'or': 'Orphan Link', 'mi': 'Missing',
            'su': 'Setuid', 'sg': 'Setgid', 'tw': 'Sticky Other-Writable',
            'ow': 'Other-Writable', 'st': 'Sticky', 'no': 'Normal',
            'mh': 'Multi-Hardlink', 'ca': 'Capability', 'rs': 'Reset',
            'do': 'Door', '~': 'Backup File'
        };
        
        // Category order for sorting
        const categoryOrder = [
            'Directory', 'Symlink', 'Executable', 'File',
            'Block Device', 'Character Device', 'FIFO/Pipe', 'Socket',
            'Orphan Link', 'Missing', 'Setuid', 'Setgid', 
            'Sticky Other-Writable', 'Other-Writable', 'Sticky', 'Normal',
            'Multi-Hardlink', 'Capability', 'Reset', 'Door',
            'Backup File',
            'Configuration File', 'Git Configuration', 'Dockerfile', 'Makefile',
            'C Source Code', 'C++ Source Code', 'Python Source Code', 
            'JavaScript Source Code', 'TypeScript Source Code', 'Java Source Code',
            'C# Source Code', 'Go Source Code', 'Rust Source Code', 'PHP Source Code',
            'Ruby Source Code', 'Perl Source Code', 'Lua Source Code', 'Swift Source Code',
            'Kotlin Source Code', 'Scala Source Code', 'Clojure Source Code', 'Elm Source Code',
            'Emacs Lisp Source Code', 'Haskell Source Code', 'OCaml Source Code', 'F# Source Code',
            'Visual Basic Source Code', 'Assembly Source Code', 'Verilog Source Code', 'VHDL Source Code',
            'Zig Source Code', 'Nim Source Code', 'Crystal Source Code', 'D Source Code',
            'Dart Source Code', 'Julia Source Code', 'R Source Code', 'Objective-C Source Code',
            'Objective-C++ Source Code', 'Ada Source Code', 'Pascal Source Code', 'Fortran Source Code',
            'Prolog Source Code', 'Erlang Source Code', 'Elixir Source Code', 'Mojo Source Code',
            'PRQL Source Code', 'Raku Source Code', 'PureScript Source Code',
            'Shell Script', 'Bash Script', 'Zsh Script', 'Fish Script',
            'PowerShell Script', 'Batch Script', 'Tcl Script', 'AWK Script',
            'Sed Script', 'AppleScript',
            'HTML Document', 'CSS Stylesheet', 'SCSS Stylesheet', 'SASS Stylesheet', 'LESS Stylesheet',
            'XML Document', 'JSON Data', 'YAML Document', 'TOML Document', 'SVG Image',
            'Web App Manifest',
            'Text Document', 'Markdown Document', 'reStructuredText Document',
            'LaTeX Document', 'PDF Document', 'Word Document', 'PowerPoint Presentation',
            'Excel Spreadsheet', 'OpenDocument Text', 'OpenDocument Spreadsheet', 'OpenDocument Presentation',
            'Rich Text Format', 'EPUB Ebook',
            'JPEG Image', 'PNG Image', 'GIF Image', 'Bitmap Image', 'TIFF Image', 'WebP Image',
            'Icon Image', 'Photoshop Document', 'Adobe Illustrator', 'Encapsulated PostScript',
            'RAW Image', 'AVIF Image', 'HEIF Image', 'QOI Image',
            'Blender File', 'Wavefront OBJ', 'STL 3D Model', 'FBX 3D Model', 'Collada 3D Model',
            '3D Studio Scene', '3D Manufacturing Format', 'Additive Manufacturing File',
            'STEP 3D Model', 'IGES 3D Model', 'OpenSCAD Script', 'Wavefront Material',
            'VRML World', 'X3D File', 'USD Scene',
            'MP3 Audio', 'WAV Audio', 'FLAC Audio', 'AIFF Audio', 'Ogg Vorbis Audio',
            'MPEG-4 Audio', 'Windows Media Audio', 'Monkey\'s Audio', 'MIDI Audio', 'Opus Audio',
            'MPEG-4 Video', 'AVI Video', 'Matroska Video', 'QuickTime Video', 'Windows Media Video',
            'Flash Video', 'WebM Video', 'MPEG Video', 'Ogg Video', 'DVD Video', 'Flash Movie',
            'H.264 Video',
            'ZIP Archive', 'TAR Archive', 'GZIP Archive', 'BZIP2 Archive', 'XZ Archive',
            '7-Zip Archive', 'RAR Archive', 'ARJ Archive', 'Zstandard Archive',
            'Windows Executable', 'DOS Executable', 'macOS Application', 'Debian Package',
            'RPM Package', 'macOS Package', 'Windows Installer', 'Android Package',
            'macOS Disk Image', 'ISO Disk Image', 'Disk Image', 'Toast Disk Image',
            'Void Linux Package', 'Shared Library', 'Dynamic Link Library', 'macOS Dynamic Library',
            'Kernel Module', 'Binary File', 'Virtual CD', 'ROS Bag File',
            'Object File', 'Static Library', 'Libtool Object', 'Libtool Archive',
            'LLVM Bitcode', 'LLVM IR', 'Haskell Interface', 'Python Bytecode', 'Java Bytecode',
            'Rust Library', 'Dynamic Object', 'Dynamic Interface', 'Rust Metadata',
            'Database File', 'SQL Script', 'CSV Data', 'TSV Data', 'Data File',
            'Temporary File', 'Swap File', 'Process ID', 'Lock File', 'Cache File',
            'Log File', 'Output File', 'Original Backup', 'DS_Store File',
            'Localized Resource', 'CFUserTextEncoding', 'SCons Options', 'Timestamp File',
            'SCons Database', 'LaTeX Make Database', 'Ctags File',
            'README', 'Changelog', 'License', 'Copying', 'Copyright', 'Authors',
            'Contributing', 'Contributors', 'Code of Conduct', 'Code Owners',
            'Notice', 'Version', 'Install', 'Manifest', 'Doxygen Configuration',
            'TODO', 'FAQ', 'Legacy',
            'Password File', 'Shadow File', 'Standard Input', 'Standard Output', 'Standard Error',
            'Icon File'
        ];
        
        function getCategory(key) {
            if (specialKeys[key]) return specialKeys[key];
            
            if (key.startsWith('*.')) {
                const ext = key.substring(2).toLowerCase();
                return categoryMap[ext] || 'Other File Type';
            }
            
            if (key.startsWith('*')) return 'Pattern';
            return 'Unknown';
        }
        
        function parseColorValue(value) {
            const parts = value.split(';');
            let fg = '', bg = '';
            
            const fgIndex = parts.indexOf('38');
            if (fgIndex !== -1 && parts[fgIndex + 1] === '2') {
                fg = parts.slice(fgIndex, fgIndex + 5).join(';');
            }
            
            const bgIndex = parts.indexOf('48');
            if (bgIndex !== -1 && parts[bgIndex + 1] === '2') {
                bg = parts.slice(bgIndex, bgIndex + 5).join(';');
            }
            
            if (!fg && !bg) fg = value;
            
            return { fg, bg };
        }
        
        function rgbFromAnsi(ansiCode) {
            if (!ansiCode) return '';
            const parts = ansiCode.split(';');
            const rgbIndex = parts.indexOf('2');
            if (rgbIndex !== -1 && rgbIndex + 3 < parts.length) {
                const r = parts[rgbIndex + 1];
                const g = parts[rgbIndex + 2];
                const b = parts[rgbIndex + 3];
                return `rgb(${r}, ${g}, ${b})`;
            }
            return '';
        }
        
        function parseColors() {
            const input = document.getElementById('inputColors').value.trim();
            
            if (!input) {
                showMessage('Please enter an LS_COLORS string.', 'error');
                return;
            }
            
            try {
                colorData = [];
                
                // Handle different input formats: LS_COLORS=... or export LS_COLORS=... or just the value
                let colorString = input;
                
                // Remove export statement if present
                colorString = colorString.replace(/^export\s+/i, '');
                
                // Extract value after LS_COLORS= if present
                if (colorString.includes('LS_COLORS=')) {
                    colorString = colorString.split('LS_COLORS=')[1];
                }
                
                // Remove quotes if present
                colorString = colorString.replace(/^['"]|['"]$/g, '');
                
                const entries = colorString.split(':');
                
                entries.forEach(entry => {
                    if (!entry.trim()) return;
                    const [key, value] = entry.split('=');
                    if (!key || !value) return;
                    
                    const colors = parseColorValue(value);
                    const category = getCategory(key);
                    
                    colorData.push({
                        key: key.trim(),
                        category: category,
                        fg: colors.fg,
                        bg: colors.bg,
                        originalValue: value
                    });
                });
                
                if (colorData.length === 0) {
                    showMessage('No valid entries found.', 'error');
                    return;
                }
                
                colorData.sort((a, b) => {
                    const indexA = categoryOrder.indexOf(a.category);
                    const indexB = categoryOrder.indexOf(b.category);
                    const orderA = indexA === -1 ? 9999 : indexA;
                    const orderB = indexB === -1 ? 9999 : indexB;
                    
                    if (orderA !== orderB) return orderA - orderB;
                    return a.key.localeCompare(b.key);
                });
                
                renderTable();
                updateStats();
                showMessage(`‚úÖ ${colorData.length} entries successfully parsed.`, 'success');
                
                document.getElementById('stats').style.display = 'flex';
                document.getElementById('filterSection').style.display = 'block';
                document.getElementById('tableContainer').style.display = 'block';
                
            } catch (e) {
                showMessage('Parsing error: ' + e.message, 'error');
            }
        }
        
        function createColorDropdown(presets, currentValue, index, type) {
            let html = '<select onchange="updateColor(' + index + ', \'' + type + '\', this.value)">';
            presets.forEach(preset => {
                const selected = preset.value === currentValue ? 'selected' : '';
                html += `<option value="${preset.value}" ${selected}>${preset.label}</option>`;
            });
            html += '</select>';
            return html;
        }
        
        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            colorData.forEach((item, index) => {
                const row = tbody.insertRow();
                row.dataset.index = index;
                row.dataset.category = item.category;
                row.dataset.key = item.key;
                
                row.insertCell(0).innerHTML = `<span class="category">${item.category}</span>`;
                row.insertCell(1).innerHTML = `<span class="extension">${item.key}</span>`;
                row.insertCell(2).innerHTML = createColorDropdown(colorPresets, item.fg, index, 'fg');
                row.insertCell(3).innerHTML = createColorDropdown(bgColorPresets, item.bg, index, 'bg');
                row.insertCell(4).innerHTML = generatePreview(item);
            });
        }
        
        function generatePreview(item) {
            let style = '';
            if (item.fg) {
                const fgColor = rgbFromAnsi(item.fg);
                if (fgColor) style += `color: ${fgColor}; `;
            }
            if (item.bg) {
                const bgColor = rgbFromAnsi(item.bg);
                if (bgColor) style += `background-color: ${bgColor}; `;
            }
            
            const displayText = item.key.startsWith('*.') ? item.key.substring(2) : item.key;
            return `<span class="preview-cell" style="${style}">${displayText}</span>`;
        }
        
        function updateColor(index, type, value) {
            colorData[index][type] = value;
            const row = document.querySelector(`tr[data-index="${index}"]`);
            if (row) row.cells[4].innerHTML = generatePreview(colorData[index]);
        }
        
        function exportColors() {
            if (colorData.length === 0) {
                showMessage('No data available to export.', 'error');
                return;
            }
            
            const exported = colorData.map(item => {
                let value = '';
                if (item.fg && item.bg) value = `0;${item.fg};${item.bg}`;
                else if (item.fg) value = `0;${item.fg}`;
                else if (item.bg) value = `0;${item.bg}`;
                else value = item.originalValue;
                return `${item.key}=${value}`;
            }).join(':');
            
            navigator.clipboard.writeText(exported).then(() => {
                showMessage('‚úÖ LS_COLORS copied to clipboard!', 'success');
            }).catch(() => {
                document.getElementById('inputColors').value = exported;
                showMessage('‚ö†Ô∏è Export completed. Please copy manually.', 'success');
            });
        }
        
        function filterTable() {
            const filter = document.getElementById('filterInput').value.toLowerCase();
            const rows = document.querySelectorAll('#tableBody tr');
            
            rows.forEach(row => {
                const category = row.dataset.category.toLowerCase();
                const key = row.dataset.key.toLowerCase();
                row.style.display = (category.includes(filter) || key.includes(filter)) ? '' : 'none';
            });
        }
        
        function resetAll() {
            colorData = [];
            document.getElementById('inputColors').value = '';
            document.getElementById('tableBody').innerHTML = '';
            document.getElementById('stats').style.display = 'none';
            document.getElementById('filterSection').style.display = 'none';
            document.getElementById('tableContainer').style.display = 'none';
            showMessage('', '');
        }
        
        function updateStats() {
            const extensions = colorData.filter(item => item.key.startsWith('*.')).length;
            const special = colorData.filter(item => !item.key.startsWith('*')).length;
            
            document.getElementById('totalEntries').textContent = colorData.length;
            document.getElementById('totalExtensions').textContent = extensions;
            document.getElementById('totalSpecial').textContent = special;
        }
        
        function showMessage(msg, type) {
            const msgDiv = document.getElementById('message');
            if (!msg) {
                msgDiv.innerHTML = '';
                return;
            }
            msgDiv.className = type;
            msgDiv.textContent = msg;
        }
        
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const btn = document.getElementById('modeBtn');
            btn.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
            
            // Save preference
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }
        
        // Load dark mode preference on page load
        window.addEventListener('DOMContentLoaded', () => {
            const darkMode = localStorage.getItem('darkMode') === 'true';
            if (darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('modeBtn').textContent = '‚òÄÔ∏è';
            }
            
            // Load sample LS_COLORS data for testing
            document.getElementById('inputColors').value = 
                "di=1;38;2;224;98;6:ex=1;38;2;255;75;0:*.txt=0;38;2;255;148;0:*.py=0;38;2;255;193;0:*.js=0;38;2;255;193;0:*.json=1;38;2;255;193;0:*.zip=1;38;2;191;91;48:*.jpg=0;38;2;191;91;48:*.png=0;38;2;191;91;48";
        });
    </script>
</body>
</html>


